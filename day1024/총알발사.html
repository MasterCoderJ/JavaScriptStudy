<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>총알발사</title>
    <style>
        #gun {
            position: absolute;
            top: 150px;
            left: 0px;
        }
    </style>
    <script>
        //클래스의 사용 목적은 코드의 재사용에 있다, 따라서 총알을 다수개가 필요하다면, 클래스로 정의해놓고, 해당클래스의 인스턴스를 다수 생성하자
        class Bullet {
            constructor(x, velX) {
                //js에서는 생성자에 멤버변수를 선언한다
                this.img = document.createElement("img");
                this.img.style.width = 25 + "px";
                this.img.style.height = 20 + "px";
                this.img.src = "../images/bullet.png";
                this.img.style.position = "absolute";
                this.img.style.left = 150 + "px";
                this.img.style.top = 150 + "px";
                this.x=x; //현재총알의 좌표를 표현하는 속성
                this.velX=velX;

                document.body.appendChild(this.img);
                this.move();
            }

            //총알의 움직임을 표현하는 메서드 정의
            move() {

                this. x += this.velX //등속도

                this.img.style.left = this.x + "px";

                setTimeout(()=>{
                    this.move();
                },10);

            }
        }

        function fire() {
            //거푸집인 클래스로부터 인스턴스를 생성하자
            new Bullet(150,10);
        }

        function init() {
            //버튼과 리스너 연결
            document.querySelector("button").addEventListener("click", function () {
                fire();
            });

        }
        window.addEventListener("load", function () {
            init();
        })
    </script>
</head>

<body>
    <button>발사</button>
    <img src="../images/gun.png" width="150px" id="gun">
</body>

</html>